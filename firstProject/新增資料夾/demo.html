<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
    <title>Document</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .wrap {
            width: 500px;
            height: 700px;
            margin: 20px auto;
            padding: 20px;
            background: brown;
            position: relative;
        }

        .back {
            width: 100%;
            height: 100%;
            background: url("img/cardBack.jpg");
            background-size: contain;
            background-repeat: no-repeat;
            position: absolute;
            float: left;
            margin: 8px 12px 8px 12px;
        }

        .card {
            width: 90px;
            height: 150px;
            background-size: contain;
            background-repeat: no-repeat;
            position: relative;
            float: left;
            margin: 10px;
        }

        img {
            position: absolute;
        }
    </style>



</head>

<body>
    <button onclick="">遊戲開始</button>

    <div class="wrap">
        <div id="card1" class="card">
            <div id="back1" class="back" onclick="disappear()"></div>
        </div>
        <div id="card2" class="card">
            <div id="back2" class="back" onclick="disappear2()"></div>
        </div>
        <div id="card3" class="card">
            <div id="back3" class="back" onclick="disappear3()"></div>
        </div>
        <div id="card4" class="card">
            <div id="back4" class="back" onclick="disappear4()"></div>
        </div>
    </div>

    <script type="text/javascript">

        var cards = document.getElementsByClassName("card");
        var back = document.getElementsByClassName("back");
        var cardData = [1, 2, 3, 4];
        var gameData = new Array(4);
        var shows = new Array();
        console.log(back);

        shuffle(cardData);

        for (var i = 0; i < 2; i++) {
            var p = cardData.pop();
            gameData[i * 2] = p;
            gameData[i * 2 + 1] = p;
            console.log(p);
        };

        shuffle(gameData);

        for (var i = 0; i < cards.length; i++) {
            cards[i].setAttribute("data-type", gameData[i]);
            cards[i].style.background = "url(img/" + gameData[i] + ".jpg)";
        };
        console.log(cards[0].childNodes[0]);
        console.log(cards[1].childNodes[0]);

        console.log(gameData);

        var demo = 0;   // 點按第幾次   
        var temp = 0;   // 
        function disappear() {
            demo = demo + 1;
            $("#back1").css("background", "none");
            console.log(demo);
            if (demo == 1) {   // 如果你翻的第一張是四個的第一個 
                temp = 0;
            } else if (demo == 2 && gameData[temp] == gameData[0]) {  // 如果翻的第二張是四個的第一個 && 比對第一張與其他翻開的是否一致
                $("#card1").css("background", "none");                   
                if (temp == 1) {
                    $("#card2").css("background", "none");
                } else if (temp == 2) {
                    $("#card3").css("background", "none");
                } else if (temp == 3) {
                    $("#card4").css("background", "none");
                }
            }
            else {
                $(".back").css("background", "url('img/cardBack.jpg')");
            };
            console.log(temp);
            console.log(gameData[temp]);
        };
        function disappear2() {
            demo = demo + 1;
            $("#back2").css("background", "none");
            console.log(demo);
            if (demo == 1) {                                // 如果你翻的第一張是四個的第二個 
                temp = 1;
            } else if (demo == 2 && gameData[temp] == gameData[1]) {  // 如果翻的第二張是四個的第二個
                $("#card2").css("background", "none");
                if (temp == 0) {
                    $("#card1").css("background", "none");
                } else if (temp == 2) {
                    $("#card3").css("background", "none");
                } else if (temp == 3) {
                    $("#card4").css("background", "none");
                }                                               // 比對第一張與其他翻開的是否一致
            }
            else {
                $(".back").css("background", "url('img/cardBack.jpg')");
            };
            console.log(temp);
            console.log(gameData[temp]);
        };
        function disappear3() {
            demo = demo + 1;
            $("#back3").css("background", "none");
            console.log(demo);
            if (demo == 1) {                                // 如果你翻的第一張是四個的第二個 
                temp = 2;
            } else if (demo == 2 && gameData[temp] == gameData[2]) {  // 如果翻的第二張是四個的第二個
                $("#card3").css("background", "none");
                if (temp == 0) {
                    $("#card1").css("background", "none");
                } else if (temp == 1) {
                    $("#card2").css("background", "none");
                } else if (temp == 3) {
                    $("#card4").css("background", "none");
                }                                               // 比對第一張與其他翻開的是否一致
            }
            else {
                $(".back").css("background", "url('img/cardBack.jpg')");
            };
            console.log(temp);
            console.log(gameData[temp]);
        };
        function disappear4() {
            demo = demo + 1;
            $("#back4").css("background", "none");
            console.log(demo);
            if (demo == 1) {                                // 如果你翻的第一張是四個的第二個 
                temp = 3;
            } else if (demo == 2 && gameData[temp] == gameData[3]) {  // 如果翻的第二張是四個的第二個
                $("#card4").css("background", "none");
                if (temp == 0) {
                    $("#card1").css("background", "none");
                } else if (temp == 1) {
                    $("#card2").css("background", "none");
                } else if (temp == 2) {
                    $("#card3").css("background", "none");
                }                                               // 比對第一張與其他翻開的是否一致
            }
            else {
                $(".back").css("background", "url('img/cardBack.jpg')");
            };
            console.log(temp);
            console.log(gameData[temp]);
        };

















        // $(document).ready(function () {
        //     $(".back").click(function () {
        //         console.log("123");
        //         $(this).css("background", "url('img/1.jpg')");
        //     });
        // });


        function shuffle(array) {
            for (var i = 0; i < array.length; i++) {
                var seed = Math.floor(Math.random() * array.length);
                console.log(seed);
                var temp = array[i];
                array[i] = array[seed];
                array[seed] = temp;
            };
            return array;
            console.log(array);
        };


    </script>





</body>

</html>